<?php
/**
 * Copyright Â© 2018 Codazon, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
?>
<?php
$helper = $this->helper('Codazon\ThemeLayoutPro\Helper\Data');
$json = $helper->getConfig('mobile/general/bottom_toolbar_json');
?>
<?php if ((bool)$helper->getConfig('mobile/general/display_bottom_toolbar') && $json) : ?>
<?php
$displayLabel = $helper->getConfig('mobile/general/display_button_label');
$minicartStyle = $helper->getMiniCartStyle();
$toolbarItems = [];
$items = json_decode($json, true);
foreach ($items as $i => $item) {
    switch ($item['type']) {
        case 'cart':
            $item['class'] = $item['class'] . ' js-footer-cart';
            if ($minicartStyle == 'dropdown') {
                $item['data_action'] = '{"display": {"element": "#mobi_cart-wrapper .block-minicart"}}';
            } else {
                $item['data_action'] = '{"trigger": {"event":"click", "target": "#mobi_cart-wrapper a.cdz-top-link"}}';
            }
            $item['custom_html'] = '<span class="info-wrap" data-bind="scope: \'minicart_content\'" data-block="minicart"><span class="counter-number"><!-- ko text: getCartParam(\'summary_count\') --><!-- /ko --></span></span>';
            break;
        case 'search':
            $item['data_action'] = '{"trigger": {"event":"click", "target": ".full-box-trigger:first"}}';
            break;
        case 'menu':
            $item['data_action'] = '{"trigger": {"event":"click", "target": ".page-header .nav-toggle[data-action=toggle-nav]"}}';
            break;
        default:
    }
    $toolbarItems[] = $item;
}
$count = count($toolbarItems);
ob_start();
?>
<?php if ($count) : ?>
<div class="mb-bottom-toolbar visible-xs" id="mb-bottom-toolbar">
    <div class="mb-toolbar-backface" data-role="close-content"></div>
    <div class="mb-toolbar-content">
        <div class="mb-toolbar-content-inner cdz-dd-content cdz-dropdown" data-role="mb-toolbar-content"></div>
    </div>
    <div class="mb-toolbar-inner row">
        <div class="btn-groups <?= ($count > 4) ? 'col-xs-18' : 'col-xs-24' ?>">
            <div class="owl-carousel" id="btn-group-slider" data-role="group-slider">
                <div class="btn-group" id="tool-btn-group-1" data-role="group-item">
                    <ul class="menu-items items row">
                        <?php for($i = 0; $i < 4; $i++) : ?>
                        <?php if (!empty($toolbarItems[$i])) : ?>
                        <li class="item col-xs-6<?= empty($toolbarItems[$i]['class']) ? '' : ' '.$toolbarItems[$i]['class']; ?>">
                            <a class="action"
                                href="<?= empty($toolbarItems[$i]['url']) ? '' : $toolbarItems[$i]['url']; ?>" <?= $toolbarItems[$i]['attributes'] ?>
                                <?= empty($toolbarItems[$i]['data_action']) ? '' : "data-action='{$toolbarItems[$i]['data_action']}'" ?>
                                >
                                <i class="<?= empty($toolbarItems[$i]['icon']) ? 'fa fa-user-o' : $toolbarItems[$i]['icon']; ?>"></i>
                                <?= empty($toolbarItems[$i]['custom_html']) ? '' : $toolbarItems[$i]['custom_html']; ?>
                            </a>
                            <?php if ($displayLabel) : ?><span class="ilabel"><?= $toolbarItems[$i]['label'] ?></span><?php endif ?>
                        </li>
                        <?php endif ?>
                        <?php endfor ?>
                    </ul>
                </div>
                <?php if ($count > 4) : ?>
                <div class="btn-group" id="tool-btn-group-2" data-role="group-item">
                    <ul class="menu-items items row">
                        <?php for($i = 4; $i < 8; $i++) : ?>
                        <?php if (!empty($toolbarItems[$i])) : ?>
                        <li class="item col-xs-6<?= empty($toolbarItems[$i]['class']) ? '' : ' '.$toolbarItems[$i]['class']; ?>">
                            <a class="action" href="<?= empty($toolbarItems[$i]['url']) ? '' : $toolbarItems[$i]['url']; ?>" <?= $toolbarItems[$i]['attributes'] ?>
                                <?= empty($toolbarItems[$i]['data_action']) ? '' : "data-action='{$toolbarItems[$i]['data_action']}'" ?>
                                >
                                <i class="<?= empty($toolbarItems[$i]['icon']) ? 'fa fa-user-o' : $toolbarItems[$i]['icon']; ?>"></i>
                                <?= empty($toolbarItems[$i]['custom_html']) ? '' : $toolbarItems[$i]['custom_html']; ?>
                            </a>
                            <?php if ($displayLabel) : ?><span class="ilabel"><?= $toolbarItems[$i]['label'] ?></span><?php endif ?>
                        </li>
                        <li class="item col-xs-6"><a class="action" href="tel:19796"><i class="fa fa-mobile"></i></a></li>
                        <?php endif ?>
                        <?php endfor ?>
                    </ul>
                </div>
                <?php endif ?>
            </div>
        </div>
        <?php if ($count > 4) : ?>
        <div class="col-xs-6 group-switch">
            <button data-role="switch-group" class="switcher" href="javascript:void(0);">
                <span class="fa fa-circle-o dot"></span>
                <span class="fa fa-circle-o dot"></span>
                <span class="fa fa-circle-o dot"></span>
                <span class="times"></span>
            </button>
            <?php if ($displayLabel) : ?><span class="ilabel"><?= __('More') ?></span><?php endif ?>
        </div>
        <?php endif ?>
    </div>
</div>
<?php $html = ob_get_contents();
ob_end_clean();
echo $helper->htmlFilter($html); ?>
<?php endif ?>
<?php endif ?>
<script defer>

setTimeout(()=>{
    var html = document.querySelector("html");

    if(html.lang == 'en')
    {
     document.querySelector("#mb-bottom-toolbar .btn-compare a").innerHTML = `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7.25011 4.04166C7.25031 4.8133 6.9724 5.55915 6.46732 6.14252C5.96224 6.72589 5.26383 7.10768 4.50011 7.21791V12.75C4.50011 13.4793 4.78984 14.1788 5.30557 14.6945C5.82129 15.2103 6.52077 15.5 7.25011 15.5H9.71594L8.82678 14.6108C8.75923 14.5479 8.70505 14.472 8.66748 14.3877C8.6299 14.3033 8.6097 14.2123 8.60807 14.12C8.60644 14.0277 8.62342 13.936 8.658 13.8504C8.69258 13.7648 8.74404 13.687 8.80933 13.6217C8.87461 13.5564 8.95237 13.505 9.03798 13.4704C9.12359 13.4358 9.21528 13.4188 9.30759 13.4205C9.3999 13.4221 9.49094 13.4423 9.57527 13.4799C9.6596 13.5174 9.7355 13.5716 9.79844 13.6392L11.8609 15.7017C11.9897 15.8306 12.062 16.0053 12.062 16.1875C12.062 16.3697 11.9897 16.5444 11.8609 16.6733L9.79844 18.7358C9.7355 18.8034 9.6596 18.8576 9.57527 18.8951C9.49094 18.9327 9.3999 18.9529 9.30759 18.9545C9.21528 18.9562 9.12359 18.9392 9.03798 18.9046C8.95237 18.87 8.87461 18.8186 8.80933 18.7533C8.74404 18.688 8.69258 18.6102 8.658 18.5246C8.62342 18.439 8.60644 18.3473 8.60807 18.255C8.6097 18.1627 8.6299 18.0717 8.66748 17.9873C8.70505 17.903 8.75923 17.8271 8.82678 17.7642L9.71594 16.875H7.25011C6.15609 16.875 5.10688 16.4404 4.3333 15.6668C3.55971 14.8932 3.12511 13.844 3.12511 12.75V7.11708C2.38841 6.89504 1.75597 6.41578 1.34297 5.76659C0.929962 5.1174 0.76387 4.34146 0.874938 3.58009C0.986006 2.81872 1.36685 2.12256 1.9481 1.61841C2.52935 1.11426 3.27235 0.835655 4.04178 0.833328C4.89268 0.833328 5.70873 1.17135 6.31041 1.77303C6.91209 2.37471 7.25011 3.19076 7.25011 4.04166ZM5.87511 4.04166C5.87511 3.55543 5.68196 3.08912 5.33814 2.7453C4.99432 2.40148 4.52801 2.20833 4.04178 2.20833C3.55555 2.20833 3.08923 2.40148 2.74541 2.7453C2.4016 3.08912 2.20844 3.55543 2.20844 4.04166C2.20844 4.52789 2.4016 4.99421 2.74541 5.33802C3.08923 5.68184 3.55555 5.875 4.04178 5.875C4.52801 5.875 4.99432 5.68184 5.33814 5.33802C5.68196 4.99421 5.87511 4.52789 5.87511 4.04166ZM19.1668 15.9583C19.1666 16.5733 18.9897 17.1752 18.6572 17.6925C18.3247 18.2098 17.8505 18.6206 17.2911 18.876C16.7317 19.1314 16.1107 19.2207 15.502 19.1332C14.8933 19.0457 14.3226 18.7851 13.8578 18.3825C13.393 17.9799 13.0537 17.4521 12.8803 16.8622C12.7069 16.2722 12.7067 15.6448 12.8798 15.0547C13.0528 14.4646 13.3918 13.9367 13.8563 13.5337C14.3209 13.1308 14.8915 12.8699 15.5001 12.7821V7.25C15.5001 6.52065 15.2104 5.82118 14.6947 5.30545C14.1789 4.78973 13.4795 4.49999 12.7501 4.49999H10.9718L11.8609 5.38916C11.9824 5.51949 12.0485 5.69186 12.0454 5.86997C12.0422 6.04808 11.9701 6.21802 11.8441 6.34398C11.7181 6.46994 11.5482 6.5421 11.3701 6.54524C11.192 6.54838 11.0196 6.48227 10.8893 6.36083L8.82678 4.29833C8.69803 4.16942 8.62572 3.99468 8.62572 3.81249C8.62572 3.63031 8.69803 3.45557 8.82678 3.32666L10.8893 1.26416C10.9522 1.19662 11.0281 1.14244 11.1125 1.10486C11.1968 1.06729 11.2878 1.04708 11.3801 1.04545C11.4724 1.04382 11.5641 1.0608 11.6497 1.09538C11.7353 1.12996 11.8131 1.18143 11.8784 1.24671C11.9437 1.31199 11.9951 1.38976 12.0297 1.47536C12.0643 1.56097 12.0813 1.65266 12.0797 1.74497C12.078 1.83728 12.0578 1.92832 12.0202 2.01265C11.9827 2.09699 11.9285 2.17289 11.8609 2.23583L10.9718 3.12499H12.7501C13.8441 3.12499 14.8933 3.55959 15.6669 4.33318C16.4405 5.10677 16.8751 6.15598 16.8751 7.25V12.8829C18.2006 13.2771 19.1668 14.5054 19.1668 15.9583ZM17.7918 15.9583C17.7918 15.4721 17.5986 15.0058 17.2548 14.662C16.911 14.3181 16.4447 14.125 15.9584 14.125C15.4722 14.125 15.0059 14.3181 14.6621 14.662C14.3183 15.0058 14.1251 15.4721 14.1251 15.9583C14.1251 16.4446 14.3183 16.9109 14.6621 17.2547C15.0059 17.5985 15.4722 17.7917 15.9584 17.7917C16.4447 17.7917 16.911 17.5985 17.2548 17.2547C17.5986 16.9109 17.7918 16.4446 17.7918 15.9583Z" fill="#0072bc"/>
          </svg>
      `;
    }
    else
    {
      document.querySelector("#mb-bottom-toolbar .btn-compress a").innerHTML = `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7.25011 4.04166C7.25031 4.8133 6.9724 5.55915 6.46732 6.14252C5.96224 6.72589 5.26383 7.10768 4.50011 7.21791V12.75C4.50011 13.4793 4.78984 14.1788 5.30557 14.6945C5.82129 15.2103 6.52077 15.5 7.25011 15.5H9.71594L8.82678 14.6108C8.75923 14.5479 8.70505 14.472 8.66748 14.3877C8.6299 14.3033 8.6097 14.2123 8.60807 14.12C8.60644 14.0277 8.62342 13.936 8.658 13.8504C8.69258 13.7648 8.74404 13.687 8.80933 13.6217C8.87461 13.5564 8.95237 13.505 9.03798 13.4704C9.12359 13.4358 9.21528 13.4188 9.30759 13.4205C9.3999 13.4221 9.49094 13.4423 9.57527 13.4799C9.6596 13.5174 9.7355 13.5716 9.79844 13.6392L11.8609 15.7017C11.9897 15.8306 12.062 16.0053 12.062 16.1875C12.062 16.3697 11.9897 16.5444 11.8609 16.6733L9.79844 18.7358C9.7355 18.8034 9.6596 18.8576 9.57527 18.8951C9.49094 18.9327 9.3999 18.9529 9.30759 18.9545C9.21528 18.9562 9.12359 18.9392 9.03798 18.9046C8.95237 18.87 8.87461 18.8186 8.80933 18.7533C8.74404 18.688 8.69258 18.6102 8.658 18.5246C8.62342 18.439 8.60644 18.3473 8.60807 18.255C8.6097 18.1627 8.6299 18.0717 8.66748 17.9873C8.70505 17.903 8.75923 17.8271 8.82678 17.7642L9.71594 16.875H7.25011C6.15609 16.875 5.10688 16.4404 4.3333 15.6668C3.55971 14.8932 3.12511 13.844 3.12511 12.75V7.11708C2.38841 6.89504 1.75597 6.41578 1.34297 5.76659C0.929962 5.1174 0.76387 4.34146 0.874938 3.58009C0.986006 2.81872 1.36685 2.12256 1.9481 1.61841C2.52935 1.11426 3.27235 0.835655 4.04178 0.833328C4.89268 0.833328 5.70873 1.17135 6.31041 1.77303C6.91209 2.37471 7.25011 3.19076 7.25011 4.04166ZM5.87511 4.04166C5.87511 3.55543 5.68196 3.08912 5.33814 2.7453C4.99432 2.40148 4.52801 2.20833 4.04178 2.20833C3.55555 2.20833 3.08923 2.40148 2.74541 2.7453C2.4016 3.08912 2.20844 3.55543 2.20844 4.04166C2.20844 4.52789 2.4016 4.99421 2.74541 5.33802C3.08923 5.68184 3.55555 5.875 4.04178 5.875C4.52801 5.875 4.99432 5.68184 5.33814 5.33802C5.68196 4.99421 5.87511 4.52789 5.87511 4.04166ZM19.1668 15.9583C19.1666 16.5733 18.9897 17.1752 18.6572 17.6925C18.3247 18.2098 17.8505 18.6206 17.2911 18.876C16.7317 19.1314 16.1107 19.2207 15.502 19.1332C14.8933 19.0457 14.3226 18.7851 13.8578 18.3825C13.393 17.9799 13.0537 17.4521 12.8803 16.8622C12.7069 16.2722 12.7067 15.6448 12.8798 15.0547C13.0528 14.4646 13.3918 13.9367 13.8563 13.5337C14.3209 13.1308 14.8915 12.8699 15.5001 12.7821V7.25C15.5001 6.52065 15.2104 5.82118 14.6947 5.30545C14.1789 4.78973 13.4795 4.49999 12.7501 4.49999H10.9718L11.8609 5.38916C11.9824 5.51949 12.0485 5.69186 12.0454 5.86997C12.0422 6.04808 11.9701 6.21802 11.8441 6.34398C11.7181 6.46994 11.5482 6.5421 11.3701 6.54524C11.192 6.54838 11.0196 6.48227 10.8893 6.36083L8.82678 4.29833C8.69803 4.16942 8.62572 3.99468 8.62572 3.81249C8.62572 3.63031 8.69803 3.45557 8.82678 3.32666L10.8893 1.26416C10.9522 1.19662 11.0281 1.14244 11.1125 1.10486C11.1968 1.06729 11.2878 1.04708 11.3801 1.04545C11.4724 1.04382 11.5641 1.0608 11.6497 1.09538C11.7353 1.12996 11.8131 1.18143 11.8784 1.24671C11.9437 1.31199 11.9951 1.38976 12.0297 1.47536C12.0643 1.56097 12.0813 1.65266 12.0797 1.74497C12.078 1.83728 12.0578 1.92832 12.0202 2.01265C11.9827 2.09699 11.9285 2.17289 11.8609 2.23583L10.9718 3.12499H12.7501C13.8441 3.12499 14.8933 3.55959 15.6669 4.33318C16.4405 5.10677 16.8751 6.15598 16.8751 7.25V12.8829C18.2006 13.2771 19.1668 14.5054 19.1668 15.9583ZM17.7918 15.9583C17.7918 15.4721 17.5986 15.0058 17.2548 14.662C16.911 14.3181 16.4447 14.125 15.9584 14.125C15.4722 14.125 15.0059 14.3181 14.6621 14.662C14.3183 15.0058 14.1251 15.4721 14.1251 15.9583C14.1251 16.4446 14.3183 16.9109 14.6621 17.2547C15.0059 17.5985 15.4722 17.7917 15.9584 17.7917C16.4447 17.7917 16.911 17.5985 17.2548 17.2547C17.5986 16.9109 17.7918 16.4446 17.7918 15.9583Z" fill="#0072bc"/>
          </svg>
      `;
    }

    var firstGroup = document.querySelector("#mb-bottom-toolbar .owl-stage .owl-item:first-child .menu-items ");
        var lastGroup = document.querySelector("#mb-bottom-toolbar .owl-stage .owl-item:last-child .menu-items ");
        console.log(lastGroup)
        console.log(lastGroup)
    
        if(firstGroup != null && lastGroup != null) {
            
            var firstGroupLastItem = document.querySelector("#mb-bottom-toolbar .owl-stage .owl-item:first-child .menu-items li:last-child ");
            var lastGroupLastItem = document.querySelector("#mb-bottom-toolbar .owl-stage .owl-item:last-child .menu-items li:last-child ");

            firstGroup.insertAdjacentElement('beforeend', lastGroupLastItem );

            lastGroup.insertAdjacentElement('beforeend', firstGroupLastItem );
        }

},2000);




</script>